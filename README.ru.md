# OpenVPN Server Dashboard

[English](README.md) | **–†—É—Å—Å–∫–∏–π**

–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö OpenVPN —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Python](https://img.shields.io/badge/python-3.11-blue.svg)

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîê **–¢–æ–∫–µ–Ω-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
- –ì—Ä–∞—Ñ–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ (5–º–∏–Ω-7–¥–Ω–µ–π)
- –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–æ–∏—Å–∫–æ–º/—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π
- üìä **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** (–¥–æ 10 –Ω–∞ –æ–¥–Ω–æ–º –≥—Ä–∞—Ñ–∏–∫–µ)
- üìã **–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** (–∞–∫—Ç–∏–≤–Ω—ã–µ –∏ –Ω–µ–¥–∞–≤–Ω–∏–µ)
- –≠–∫—Å–ø–æ—Ä—Ç CSV/JSON
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
git clone https://github.com/yourusername/openvpn-server-dashboard.git
cd openvpn-server-dashboard
mkdir -p data
make up
# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:80
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `docker-compose.yml`:

**–ù–µ—Å–∫–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–æ–≤:**
```yaml
environment:
  - SERVERS_CONFIG=server1:/path/status.log:/path/vpn.log;server2:/path/status.log
```

**–û–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä:**
```yaml
environment:
  - OPENVPN_STATUS_FILE=/var/log/openvpn/openvpn-status.log
```

### –ö–æ–Ω—Ñ–∏–≥ OpenVPN
```
status /var/log/openvpn/openvpn-status.log
status-version 2
```

## –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–î–∞—à–±–æ—Ä–¥ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–∫–µ–Ω-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–∞

**–°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ docker-compose.yml (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```yaml
environment:
  - AUTH_ENABLED=true
  - AUTH_TOKEN=–≤–∞—à-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-—Ç–æ–∫–µ–Ω
```

**–°–ø–æ—Å–æ–± 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞**

```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ç–æ–∫–µ–Ω
python3 -c "import secrets; print(secrets.token_urlsafe(32))"

# –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞: xJ8kP2mN5qR9sT4vW7yZ0aB3cD6eF1gH

# –î–æ–±–∞–≤–∏—Ç—å –≤ docker-compose.yml:
- AUTH_TOKEN=xJ8kP2mN5qR9sT4vW7yZ0aB3cD6eF1gH
```

**–°–ø–æ—Å–æ–± 3: –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```yaml
environment:
  - AUTH_ENABLED=false
```

### –ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥

1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–∞—à–±–æ—Ä–¥: `make up`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –¥–ª—è –∞–≤—Ç–æ-—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ (–µ—Å–ª–∏ AUTH_TOKEN –Ω–µ –∑–∞–¥–∞–Ω):
   ```bash
   make logs | grep "Generated random token"
   ```
3. –û—Ç–∫—Ä—ã—Ç—å http://localhost:80
4. –í–≤–µ—Å—Ç–∏ —Ç–æ–∫–µ–Ω –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—Ö–æ–¥–∞
5. –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ localStorage –±—Ä–∞—É–∑–µ—Ä–∞

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- ‚úÖ –í—Å–µ–≥–¥–∞ –∑–∞–¥–∞–≤–∞–π—Ç–µ —Å–∏–ª—å–Ω—ã–π `AUTH_TOKEN` –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS (—Å–º. —Å–µ–∫—Ü–∏—é SSL)
- ‚úÖ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –º–µ–Ω—è–π—Ç–µ —Ç–æ–∫–µ–Ω
- ‚úÖ –î–µ—Ä–∂–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ —Å–µ–∫—Ä–µ—Ç–µ - –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –≤ git
- ‚ö†Ô∏è –ü—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ —Å–º–µ–Ω–∏—Ç–µ –µ–≥–æ

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------------|----------|
| `AUTH_ENABLED` | `true` | –í–∫–ª—é—á–∏—Ç—å/–æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é |
| `AUTH_TOKEN` | (–∞–≤—Ç–æ-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è) | –¢–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞—à–±–æ—Ä–¥—É |
| `UPDATE_INTERVAL` | 60 | –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (—Å–µ–∫) |
| `RETENTION_DAYS` | 90 | –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π (–¥–Ω–∏) |
| `TRAFFIC_HISTORY_RETENTION_DAYS` | 30 | –•—Ä–∞–Ω–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ (–¥–Ω–∏) |

## API

–í—Å–µ API endpoints (–∫—Ä–æ–º–µ `/api/login` –∏ `/api/check_auth`) —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:

```bash
Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù
```

### –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

- `POST /api/login` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –∏ –≤—Ö–æ–¥
- `GET /api/check_auth` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞ –ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `GET /api/health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `GET /api/servers` - –°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤
- `GET /api/summary` - –°–≤–æ–¥–∫–∞
- `GET /api/active_sessions?server=NAME` - –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏
- `GET /api/user_stats?server=NAME&limit=50&search=user` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /api/traffic_chart?server=NAME&hours=24` - –î–∞–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤
- `GET /api/user_traffic_chart?users=user1,user2&hours=24` - –î–∞–Ω–Ω—ã–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /api/user_sessions/<username>?server=NAME` - –°–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /api/users_list?server=NAME` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /api/export/sessions?format=csv` - –≠–∫—Å–ø–æ—Ä—Ç —Å–µ—Å—Å–∏–π
- `GET /api/export/users?format=json` - –≠–∫—Å–ø–æ—Ä—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ü—Ä–∏–º–µ—Ä API –∑–∞–ø—Ä–æ—Å–∞

```bash
curl -H "Authorization: Bearer –≤–∞—à-—Ç–æ–∫–µ–Ω" \
  http://localhost/api/summary
```

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –æ–¥–Ω–æ–º –≥—Ä–∞—Ñ–∏–∫–µ.

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1. **–ß–µ—Ä–µ–∑ –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫**: –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ "Add user to compare"
2. **–ß–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—ã**: –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Active Sessions –∏–ª–∏ User Statistics
3. **–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–µ—Å—Å–∏–π**: –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É üìã —Ä—è–¥–æ–º —Å –∏–º–µ–Ω–µ–º –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö —Å–µ—Å—Å–∏–π
4. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ**: –¥–æ 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –º–æ–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ì—Ä–∞—Ñ–∏–∫ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ö–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∫–∞–∂–¥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (—Å–∫–∞—á–∞–Ω–æ/–∑–∞–≥—Ä—É–∂–µ–Ω–æ)
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –¥–µ—Ç–∞–ª—è–º–∏ —Å–µ—Å—Å–∏–π (–∞–∫—Ç–∏–≤–Ω—ã–µ + –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π)
- –¶–≤–µ—Ç–æ–≤–∞—è –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ü–∏—è
- –í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ (1—á, 6—á, 24—á, 7–¥)

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

SQLite —Å 3 —Ç–∞–±–ª–∏—Ü–∞–º–∏:
- `sessions` - VPN —Å–µ—Å—Å–∏–∏
- `user_stats` - –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `traffic_history` - –î–µ–ª—å—Ç—ã —Ç—Ä–∞—Ñ–∏–∫–∞ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤

**–í–∞–∂–Ω–æ:** –¢—Ä–∞—Ñ–∏–∫ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ –¥–µ–ª—å—Ç—ã, –∞ –Ω–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

## Makefile

```bash
make up        # –ó–∞–ø—É—Å–∫
make down      # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
make restart   # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
make logs      # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
make clean     # –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
```

## SSL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
mkdir -p nginx/ssl
openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
  -keyout nginx/ssl/nginx.key -out nginx/ssl/nginx.crt
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
